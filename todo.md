# 外贸报价管理系统 - 功能清单

## 数据库与后端
- [x] 设计产品表结构（编号、名称、图片URL、多级价格、尺寸信息）
- [x] 设计公司信息表结构
- [x] 创建报价单表结构
- [x] 创建操作日志表
- [x] 创建报价导出历史表
- [x] 实现产品 CRUD 接口
- [x] 实现公司信息 CRUD 接口
- [x] 实现报价单生成接口
- [x] 实现操作日志接口
- [x] 实现用户管理接口
- [x] 实现图片代理接口（绕过CORS）

## 权限控制
- [x] 管理员可修改产品所有信息（包括价格）
- [x] 业务员可查看所有信息但只能编辑非价格字段
- [x] 业务员产品更新接口（排除价格字段）
- [x] 前端根据角色显示/隐藏价格编辑功能

## 前端功能
- [x] 创建产品管理页面（列表、添加、编辑、删除）
- [x] 创建产品导入页面（Excel批量上传）
- [x] 创建报价单生成页面（三步流程）
- [x] 创建公司信息设置页面
- [x] 创建用户管理页面（管理员专属）
- [x] 创建操作日志页面（管理员专属）
- [x] 实现产品搜索功能
- [x] 实现货币切换和汇率换算
- [x] 实现Excel导出功能（含图片嵌入）
- [x] 创建仪表板首页

## 测试
- [x] 编写后端单元测试
- [x] 测试权限控制功能


## Bug修复
- [x] 客户级别选择移到预览编辑步骤，每个产品单独选择客户级别
- [x] 修复产品搜索功能，确保输入产品编号可以正确搜索到产品

## 功能优化 v2
- [x] 批量输入处新增按产品名称搜索导入功能
- [x] 预览编辑处添加实时汇率获取功能（人民币/美元）
- [x] 调整预览编辑列顺序：产品编号、产品名称、图片、客户级别、数量、单价、金额、一箱X套、尺寸
- [x] 修复Excel导出图片功能（图片代理接口400错误）

## 功能优化 v3 - Excel模板重构
- [x] 导出步骤增加客户名称输入框（选填）
- [x] 导出步骤增加客户地址输入框（选填）
- [x] 产品管理中每箱数量支持小数（0-10000范围）
- [x] Excel表头：公司名称（蓝色加粗）、公司地址（小6号字）、PROFORMA INVOICE
- [x] Excel第4-7行：日期、ORDER NO、客户信息、价格条款等
- [x] Excel产品表格标题行：NO., Item No., Description, PICTURES, QTY/SET, PRICE, AMOUNT
- [x] Excel尺寸信息列（可选）：L/cm, W/cm, H/cm, CBM/Per, CTN, CBM/m³, NW/kg, Note
- [x] Excel汇总行：Total、SAY、REMARK、条款行、银行信息、签名行
- [x] Excel边框设置：内外边框，外边框加粗
- [x] 图片嵌入到D列并适应单元格大小
- [x] 金额数字加粗，货币符号正确显示

## 功能优化 v4 - Excel格式调整
- [x] 调整列宽：A=9.53, B=16.13, C=24.8, D=23.33, E=15.87, F=16.33, G=20.33, H-N=7.27, O=16.6
- [x] 调整行高：第1-3行=52, 第4-5行=36, 第6行=76, 第7-8行=36, 产品行=160, Total行=60, 其他行=36
- [x] 字体改为Calibri
- [x] 字号：第1行=14, 第2行=8, 其他行=10
